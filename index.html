<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valentine's Moment 💖</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@400;600&display=swap');
        body { font-family: 'Quicksand', sans-serif; background-color: #fff1f2; }
        .cursive { font-family: 'Dancing Script', cursive; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        input[type="range"] { accent-color: #ec4899; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;
        const { motion, AnimatePresence } = FramerMotion;

        const photos = [
            { src: "https://i.postimg.cc/tRrRbx6b/Snapchat-1222784673.jpg", caption: "Us? 🥺" },
            { src: "https://i.postimg.cc/7hXnsNt5/Snapchat-1963261135.jpg", caption: "Extra flowers 💐" },
            { src: "https://i.postimg.cc/q7nXVrDx/Snapchat-963528480.jpg", caption: "A little surprise 🎁" },
            { src: "https://i.postimg.cc/nrVvDDF3/Snapchat-287615591.jpg", caption: "My favorite moments 💞" },
        ];

        const emojis = ["💘", "🌹", "💋", "💝", "💕", "🥰"];

        function shuffle(arr) {
            const a = [...arr];
            for (let i = a.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [a[i], a[j]] = [a[j], a[i]];
            }
            return a;
        }

        function FloatingHearts({ burst }) {
            const hearts = useMemo(() => Array.from({ length: burst ? 80 : 30 }, (_, i) => i), [burst]);
            return (
                <div className="fixed inset-0 pointer-events-none overflow-hidden z-0">
                    {hearts.map((h) => (
                        <motion.div
                            key={h}
                            initial={{ y: "110%", x: `${Math.random() * 100}%`, opacity: 0 }}
                            animate={{ y: "-20%", opacity: [0, 1, 1, 0], rotate: [0, 15, -15, 0] }}
                            transition={{ duration: (burst ? 3 : 6) + Math.random() * 4, repeat: Infinity, delay: Math.random() * 5 }}
                            className="absolute text-2xl"
                        >
                            💗
                        </motion.div>
                    ))}
                </div>
            );
        }

        function Typewriter({ text, speed = 28 }) {
            const [shown, setShown] = useState("");
            useEffect(() => {
                let i = 0;
                const t = setInterval(() => {
                    setShown(text.slice(0, i + 1));
                    i++;
                    if (i >= text.length) clearInterval(t);
                }, speed);
                return () => clearInterval(t);
            }, [text]);
            return <p className="whitespace-pre-line leading-relaxed">{shown}</p>;
        }

        function AutoPhotoSlider({ photos }) {
            const [idx, setIdx] = useState(0);
            const ref = useRef(null);

            useEffect(() => {
                const t = setInterval(() => {
                    setIdx(p => (p + 1) % photos.length);
                }, 2500);
                return () => clearInterval(t);
            }, [photos.length]);

            useEffect(() => {
                if (ref.current && ref.current.children[idx]) {
                    ref.current.children[idx].scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
                }
            }, [idx]);

            return (
                <div>
                    <div ref={ref} className="flex overflow-x-auto snap-x snap-mandatory gap-3 pb-2 no-scrollbar">
                        {photos.map((p, i) => (
                            <motion.div key={i} className="min-w-[85%] snap-center relative" animate={idx === i ? { scale: 1.02 } : { scale: 1 }}>
                                <img src={p.src} className="w-full h-64 object-cover rounded-2xl border border-pink-100 shadow-md" />
                                <div className="absolute bottom-2 inset-x-2 bg-white/80 backdrop-blur p-2 rounded-xl text-xs text-pink-700 shadow">{p.caption}</div>
                            </motion.div>
                        ))}
                    </div>
                    <p className="text-[10px] text-pink-500 mt-2">Auto sliding 💕 • Swipe to see more ➜</p>
                </div>
            );
        }

        function MemoryGame({ onNext }) {
            const [deck, setDeck] = useState(() => shuffle([...emojis, ...emojis]).map((v, i) => ({ id: i, v, open: false, matched: false })));
            const [selected, setSelected] = useState([]);

            useEffect(() => {
                if (selected.length === 2) {
                    const [a, b] = selected;
                    if (deck[a].v === deck[b].v) {
                        setDeck(d => d.map((c, i) => (i === a || i === b ? { ...c, matched: true } : c)));
                        setSelected([]);
                    } else {
                        setTimeout(() => {
                            setDeck(d => d.map((c, i) => (i === a || i === b ? { ...c, open: false } : c)));
                            setSelected([]);
                        }, 700);
                    }
                }
            }, [selected]);

            const allMatched = deck.every(c => c.matched);
            return (
                <div className="space-y-4 text-center">
                    <h2 className="text-2xl text-pink-600 cursive">Valentine Match 🎮</h2>
                    <div className="grid grid-cols-4 gap-2">
                        {deck.map((c, i) => (
                            <button key={c.id} onClick={() => { if(!c.open && !c.matched && selected.length < 2) { setDeck(d => d.map((card, idx) => idx === i ? {...card, open: true} : card)); setSelected([...selected, i]); }}} 
                                className={`h-14 rounded-xl shadow border border-pink-50 text-xl flex items-center justify-center transition-all ${c.open || c.matched ? 'bg-white' : 'bg-pink-200'}`}>
                                {c.open || c.matched ? c.v : "❓"}
                            </button>
                        ))}
                    </div>
                    <button onClick={onNext} disabled={!allMatched} className="w-full py-3 bg-pink-500 text-white rounded-2xl disabled:opacity-50">Next Step</button>
                </div>
            );
        }

        function App() {
            const [step, setStep] = useState(0);
            const [startPos, setStartPos] = useState({ x: 50, y: 75 });
            const [teleports, setTeleports] = useState(0);
            const [loveMeter, setLoveMeter] = useState(50);
            const [secretOpen, setSecretOpen] = useState(false);

            const jump = () => {
                if (teleports < 12) {
                    setTeleports(t => t + 1);
                    setStartPos({ x: 10 + Math.random() * 80, y: 15 + Math.random() * 70 });
                } else {
                    setStep(1);
                }
            };

            const Card = ({ children, className = "" }) => (
                <div className={`bg-white rounded-3xl shadow-xl border border-pink-100 p-6 ${className}`}>{children}</div>
            );

            return (
                <div className="min-h-screen w-full flex items-center justify-center p-4 relative overflow-hidden">
                    <FloatingHearts burst={step >= 5} />
                    
                    <div className="w-full max-w-sm z-10">
                        <AnimatePresence mode="wait">
                            {step === 0 && (
                                <motion.div key="0" initial={{opacity:0}} animate={{opacity:1}} exit={{opacity:0}}>
                                    <Card className="text-center space-y-4 py-12">
                                        <div className="text-6xl animate-bounce">💖</div>
                                        <h1 className="text-2xl cursive text-pink-600">A Valentine Moment</h1>
                                        <p className="text-pink-400 text-sm">Something special is waiting... Catch it!</p>
                                    </Card>
                                    <button 
                                        style={{ position: 'fixed', left: `${startPos.x}%`, top: `${startPos.y}%`, transform: 'translate(-50%, -50%)' }}
                                        className="bg-pink-500 text-white px-6 py-3 rounded-full shadow-2xl transition-all duration-150 font-bold whitespace-nowrap"
                                        onMouseEnter={jump} onClick={jump}
                                    >
                                        {teleports < 12 ? "Start 💘" : "You caught me! Click 😳"}
                                    </button>
                                </motion.div>
                            )}

                            {step === 1 && (
                                <motion.div key="1" initial={{y:20, opacity:0}} animate={{y:0, opacity:1}} className="space-y-4">
                                    <Card className="text-center">
                                        <h1 className="text-3xl cursive text-pink-600 mb-4">Will You Be My Valentine? 💘</h1>
                                        <p className="text-pink-700 text-sm mb-6">A little reminder of what this day feels like with you.</p>
                                        <button onClick={() => setStep(2)} className="w-full py-3 bg-pink-500 text-white rounded-2xl shadow-lg hover:bg-pink-600 transition-colors">Open This 💌</button>
                                    </Card>
                                </motion.div>
                            )}

                            {step === 2 && (
                                <motion.div key="2" initial={{opacity:0}} animate={{opacity:1}} className="space-y-4">
                                    <Card>
                                        <h2 className="text-2xl text-pink-600 cursive mb-4">A Valentine Note 💌</h2>
                                        <div className="text-pink-800 text-sm">
                                            <Typewriter text={`Hey Puchkiii,\n\nEvery small moment with you feels softer, warmer, and brighter. This page is a tiny reminder that you are appreciated more than words can say.\n\nAlways 💕 — Puchku`} />
                                        </div>
                                        <button onClick={() => setStep(3)} className="w-full py-3 bg-pink-500 text-white rounded-2xl mt-6">Next</button>
                                    </Card>
                                </motion.div>
                            )}

                            {step === 3 && (
                                <motion.div key="3" initial={{opacity:0}} animate={{opacity:1}}>
                                    <Card><MemoryGame onNext={() => setStep(4)} /></Card>
                                </motion.div>
                            )}

                            {step === 4 && (
                                <motion.div key="4" initial={{opacity:0}} animate={{opacity:1}}>
                                    <Card>
                                        <h2 className="text-2xl text-pink-600 cursive mb-4">Random Thoughts 💭</h2>
                                        <AutoPhotoSlider photos={photos} />
                                        <button onClick={() => setStep(5)} className="w-full py-3 bg-pink-500 text-white rounded-2xl mt-4">Next</button>
                                    </Card>
                                </motion.div>
                            )}

                            {step === 5 && (
                                <motion.div key="5" initial={{opacity:0}} animate={{opacity:1}} className="space-y-4">
                                    <Card className="bg-pink-50 text-center">
                                        <h2 className="text-2xl text-pink-700 cursive mb-4">One Last Thought 💝</h2>
                                        <div className="bg-white/80 p-4 rounded-2xl text-left space-y-3">
                                            <p className="text-sm text-pink-700">How much do you love me? 😄</p>
                                            <input type="range" className="w-full" value={loveMeter} onChange={(e)=>setLoveMeter(e.target.value)} />
                                            <p className="text-sm font-bold text-pink-600 text-center">Love: {loveMeter}% {loveMeter == 100 && "💘"}</p>
                                        </div>
                                        <button onClick={() => setSecretOpen(!secretOpen)} className="text-[10px] text-pink-400 underline mt-4 block mx-auto">Don't click this 😈</button>
                                        {secretOpen && <p className="text-[10px] text-pink-600 mt-2">Plot twist: You survived the prank! 😂❤️</p>}
                                        <button onClick={() => setStep(6)} className="w-full py-3 bg-pink-500 text-white rounded-2xl mt-6">The End 💝</button>
                                    </Card>
                                </motion.div>
                            )}

                            {step === 6 && (
                                <motion.div key="6" initial={{opacity:0}} animate={{opacity:1}} className="space-y-4 text-center">
                                    <Card>
                                        <h2 className="text-2xl cursive text-pink-600 mb-4">Wait... one more thing 🥺</h2>
                                        <div className="text-pink-800 text-sm">
                                            <Typewriter text={`Even after all the pranks…\nI hope this made you smile today.\n\nHappy Valentine’s Day 💗`} />
                                        </div>
                                        <button onClick={() => setStep(7)} className="w-full py-3 bg-pink-500 text-white rounded-2xl mt-6 shadow-md">Final Letter 💌</button>
                                    </Card>
                                </motion.div>
                            )}

                            {step === 7 && (
                                <motion.div key="7" initial={{scale:0.9, opacity:0}} animate={{scale:1, opacity:1}}>
                                    <Card className="bg-pink-50 border-2 border-pink-200">
                                        <h2 className="text-2xl text-pink-700 cursive text-center mb-4">From My Heart 💌</h2>
                                        <div className="text-pink-900 text-sm leading-relaxed italic overflow-y-auto max-h-80 pr-2">
                                            <Typewriter speed={20} text={`Hey Puchkiii,\n\nI know I joke around and annoy you sometimes… but the truth is, I really care about you.\n\nYou make simple days feel special, and even small moments with you stay in my mind for a long time.\n\nI don’t always say it perfectly, but I genuinely feel lucky that you’re here.\n\nIf this little website made you smile even once, then it did its job.\n\nAlways yours 💕\n— Puchku`} />
                                        </div>
                                        <button onClick={() => setStep(0)} className="w-full py-2 text-pink-500 text-xs mt-4">Restart 💘</button>
                                    </Card>
                                </motion.div>
                            )}
                        </AnimatePresence>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
